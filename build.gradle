apply plugin: 'java'
libsDirName = "${rootDir}"

defaultTasks 'copyResources', 'build'
                  
sourceSets {
    main {
       java {
         srcDir 'src'
       }
       resources {
         srcDir 'resources'
       }
     }
}

dependencies {
   compile files ('./args4j-2.0.8.jar', './commons-lang3-3.1.jar', './xercesImpl-2.11.0.jar', './jnetpcap.jar')
}

jar {
   manifest {
       attributes 'Main-Class': 'com.q1labs.qradar.tools.flowedit.FlowEditor'
   }
}


task copyResources(type: Copy) {
    from '../../../git-root/qflow/qflow'
    into 'resources'
    include ('**/*.xml')
}

task createArchive(type: Tar) {
     baseName = 'flowedit'
     destinationDir = projectDir
     compression = Compression.GZIP
     include '*.jar'
     include '*.xml'
     include '*.bin'
     include '*.sh'
     include 'libpcap-devel-1.4.0-4.20130826git2dbcaa1.el6.x86_64.rpm'
     include '*.so'
     exclude 'build.xml'
     from (projectDir)
}

task runJava(type: JavaExec, dependsOn: [classes, resources]) {
   main = 'com.q1labs.qradar.tools.flowedit.FlowEditor'
   classpath = sourceSets.main.runtimeClasspath
}
 
task wrapper(type:Wrapper) {
   gradleVersion = '1.12'
}